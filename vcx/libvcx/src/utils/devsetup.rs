extern crate rusqlite;
extern crate rand;

use utils::constants;
use utils::libindy::signus::SignusUtils;
use schema::{create_new_schema, get_sequence_num};
use claim_def::create_new_claimdef;
use utils::libindy::wallet;
use utils::libindy::pool;
use settings;

/* INSTITUTION/ENTERPRISE settings */
pub const AGENCY_ENDPOINT: &'static str = "https://enym-eagency.pdev.evernym.com";
pub const AGENCY_DID: &'static str = "YRuVCckY6vfZfX9kcQZe3u";
pub const AGENCY_VERKEY: &'static str = "J8Yct6FwmarXjrE2khZesUXRVVSVczSoa9sFaGe6AD2v";
pub const SDK_TO_REMOTE_DID: &'static str = "AQ2EZRY9JQ4ssjmZPL5MiU";
pub const SDK_TO_REMOTE_VERKEY: &'static str = "684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX";
pub const REMOTE_TO_SDK_DID: &'static str = "7csYfSY8b4hvqnu5K8nGQP";
pub const REMOTE_TO_SDK_VERKEY: &'static str = "4cDwBvDZy9aWWKf2uCYTSgffCNt7ffmY9nrMTHmqsG8z";
pub const INSTITUTION_DID: &'static str = "2hoqvcwupRTUNkXn6ArYzs";
pub const INSTITUTION_VERKEY: &'static str = "vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf";

/**
 * CONSUMER/USER settings
 * generated by running provision script with: --enterprise-seed=00000000000000000000001DIRECTION --agent-seed=00000000000000000000002DIRECTION
 */

pub const C_AGENCY_ENDPOINT: &'static str = "https://cagency.pdev.evernym.com";
pub const C_AGENCY_DID: &'static str = "dTLdJqRZLwMuWSogcKfBT";
pub const C_AGENCY_VERKEY: &'static str = "LsPQTDHi294TexkFmZK9Q9vW4YGtQRuLV8wuyZi94yH";
pub const C_SDK_TO_REMOTE_DID: &'static str = "QgUb4aHJ2cigGZCrEe7DHk";
pub const C_SDK_TO_REMOTE_VERKEY: &'static str = "DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q";
pub const C_REMOTE_TO_SDK_DID: &'static str = "7faARCpBNrEESKmvBejhV7";
pub const C_REMOTE_TO_SDK_VERKEY: &'static str = "4dhJ9JkxJm4n5QbYUR9r3KcUoC34yZJgXouRa2PKgMUE";
pub const C_INSTITUTION_DID: &'static str = "GXTZy9GzdtD2c1J88Jrn8C";
pub const C_INSTITUTION_VERKEY: &'static str = "9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc";


static DEV_ENTRIES: &[[&str; 3]; 22] = &[
    // Claim 1
    [
        "claim_definition::DunkM3x1y7S4ECgSL4Wkru:296",
        r#"{"ref":296,"origin":"DunkM3x1y7S4ECgSL4Wkru","signature_type":"CL","data":{"primary":{"n":"99428778485295702817754737076920416646469599816796058357879425849238435109987644929077926690767754571438513976745634466545930004315879337925986983323718601746763186816237976706663131472116928820485177727562919650026598439703119308605504154728014558129426322712726746107334575382710571145967159602471272794200757919578036214644676228417515250176091702915684980888330482195675486386463766662110375765644630347434282765946271478370223590938477018196358262178266639616195069388854153552283741277397642502716215317922522347752995829977463078494006346923541230641137785940717177625000066078575228541115400800606829322146189","s":"4262697523067282590875623322810468719905798657563122028252807033309080161222141162021529123860930676235058926531237862116190932138501692028543644929067144038337341833519033829528293489371712499317635986687010656026704797555168612657451113586864315281603862578304130585430383534727155073396928535012010592561844811130201062423723762401555893918045369757503817765100859650891615798504739948145161820675220226559279971776159488034850472835235770061065285424653085591216770526303688870165205651994345694096581342748288799128164352080844285320434461981240723634696757351844774554766283953839642657486861226953814047842929","rms":"4954254209869863027226437816622337033231401484892655742759098243074834056860554478145611978959281762745316620841880798219121724959417472804049006099887989094846865563833424339418802917350151057900577707848765137707356275751708061812597583952638186563394346082597490565147626860878536944393111018955115649003786801400897230212664393310321585862194298196411069107702850743673690569965761865016981088458648193523716255382214543797121163964395960785008752799670756128786859593938623177270508618909694744788923419955492012243787914295639893426964714461093543936456719980276349970087109174253639439868958019389166579262575","r":{"zip":"74956440276560842219386386949501334901745873429386936900365818975457353260601807261933650929090538031735582385947471278492228313765756191623618333500438935672024749925075240437498509973218482070696493945213634036550441493374642515168752433368040350802776480225600146700687846378638812213053286383603739811350845459930300068822516848370748191138034236343315882093499180604607146696491615800548374691929412928964600544667206151608611720247647406331599405973027987125494266625103888146199964898246177213796838010797733665270171495627292048642070543928071268412447560929798764090884549423336245253978899378845948436862426","address2":"57679522452004744701405550941202604591719920757283502008485675611434414137295004570076147640955402563426630253258414497521273165189619782098990671347924392394314479588943255097108355413542493998039472796180003038432436246817233604849461055916698998714896634176932960896716365132422404542333096708564183135343820033029245564135042413709041940788034770693966934617511712466419247048798423718640498623662511072223084084944500372888073771484295855955483580084359604935887074194515066732366561924156402190191131844004626903012341406936609669722948691720865299683966233850521392137114619440677445789632745028895724959688895","city":"35466604059641533039592420497986744740854179796750089761343933725920285992714162569604952334827209165903243286454808850962095450155369449942811527982579841064514599079428702756893042401186494359819382679712563820969669763445640328720640923686883747831871370291529001691914037961989375126285450219770724696922262758950213045144325205647651795326464925136548479783255555554417959598826690454918639357089969450899297847569418903814118881674673738352857272540243438986723380497150978124012493240113086782064371615953745167406276020343115256912395627460201873488886092685249310311269635861269305933695467403882086329315910","state":"45596524988464234530869839688079715507636354288699545974491679297642672948819891667476915830830085735271032162784314367387362440714500805916013120725087644059865338921807048690165680122168316369175800631446868697777878033102434481175111186154769143458315617467379098188023148891867928486020187988819723460385040569618938237592401831611305469305463923791380474129345135192188650468434239050124347152729386643980977245957377151342534414540342387426059399733532103100976360330258105386614903376965430519008789950892185199141235908568473205599979559929401217866365242204684792443824925042070686075090034928085906893396848","address1":"96680285914743586971354303008603954104837017031537428053621522097355760848772632271175068565271218810070972941285395000005308264291987288007126814047238752040274085373120782045921432144174737579816295920670114891484485299689856966797363778373483356516727743202621975042057010300589400555111468562453066588718771416479159414221411603675969677122133693973278295810155146150168012670019303260240162099106745240789807997553459009412671393901789493474320919683407118680104505272006981319777413219304467270896850901341975475104337736635070223752254975511090670503857198812023068131842224182094284405732143618760592382423096"},"rctxt":"33194852513762479579390929325386064719792957858842160768224425193210524979789472355176230835436975183379992845226206551862368139794529326481578558293979699577667424339087046181229947429527806100384943061901430744656403037421277869095824628087273917901756304426221088079578036151746608592018564700132162139886791360253289105380621177738740679815096127338497160588945218112741656383477610028765621185575884209408556899857715735922910000324027969714070297413077348023803161122726060112741855079181966600285388842299643114399039570081258705682757799954577443228527440179966835057689697545817566344193908072626530871375746","z":"9294889662893694174319357896992816852720732323499357703617370604652111927664331320061503765758076204208081259596079692697323452277158061284767406441747180189598844276245844147729045791076637276589239900125993832929011014208650812991907010814915549148589274824208056030436468621048729972304812289273892201640161594607956890431783943033896784197079056742370569064454869397869337531104804633349628444930635410433430488650657371169706767406796211193219417960908401019169560348285775308058243357123089026495954578651743502344206957449742705222020906659265649974972172850700822182861509309949101818508258406643395556382218"},"revocation":null}}"#,
        "2018-01-31 00:23:52"
    ],
    [
        "claim_definition_private::DunkM3x1y7S4ECgSL4Wkru:296",
        r#"{"secret_key":{"p":"164947221116342535047098726622755101065080136752736349166790986257593574134120479331953233513275251895107894235052107679611825382929541101129212211112542881041420889742740475157375280369331541239250762470460495400144052469826268378754649019046259400948021010657746332663850685863363412410655353782667824823171","q":"150697868403562577560334485769574481687951425609307016617997959031288524146545751322514122293455210246593608864538557825491073230568775513867811758266737917060049156389247360999656104440467301091616926250255084443803999863773718610187147947992102497528572522148181691448672777133614550087669175244646746361061"},"secret_key_revocation":null}"#,
        "2018-01-31 00:23:52"
    ],
    // Claim 2
    [
        "claim_definition::DunkM3x1y7S4ECgSL4Wkru:294",
        r#"{"ref":294,"origin":"DunkM3x1y7S4ECgSL4Wkru","signature_type":"CL","data":{"primary":{"n":"109771782717789927715813503416482237966166256492692849898105298805640920494965474498097794165388705565994002379936173370017038108601109177450503633184692727937818017513904457064063425596628719184264588188042203491376575589401013197244406112881245944823517615263345789127176799206776500936061880386713988945758616089726509508899527790830038654014761736342768071091051942406731608999906745613168229610330676202457925806894854331115737823343486604597163274403664509093436736637538237528760830399104116748120227181576634233110947788253540686349044690046273463301995519672370340644716718867745822921242986672437088173172093","s":"95437635212122644029603938635130083509297279576359512102897342481836339075376632485282221649730901004893130707806209565490548136195515657986732372400675641841927116100207172104632782087817286953332190497912976019136383296327882617802445725625920448673927884703566810242149364686387975710152096151558721321973121109278993119155801931992244541359150921379385767716675306179999049590953023602004922551591329457334787837655275185314127601805527183233155055174847001559381243941140653035638064122120387223022767847502313814554920844242206927799702190867300401862238557445645956825151778356935810083572386270548857682213972","rms":"44173514703322115345016781778514768684849263531304638170024189628458523441094464764093925044782641047206852872085211548750304990340392001552097248480069412643685326765865975904493791307530300693398427624015559825520606070909230442355383945461301288907684943973726109181557613916741328933937355612656174799773130136304269358366410811724367549159677996031337513857750837112339772604382407429814057073020851438260648565290236839201244251062971168734315776748928005066505872435807283329525338742701254490292464396008505306370374778957741174913209670927621204030565283200911244974757993893872709797268910401066657103699325","r":{"b2":"108704304690831398352545650225099793517441760748885629556641981794677560844970368146335528800501269527078708184947821993491057067895400086395186121579123401014837223837248688930378201190722771767692825050270385566582368758378998110551743198711120593083257973026636283241575739774003500846036987789552027537657434269984369958748087626352205286819443684359185131698548520559242510945915501007528490391017523850336644670512589634338467364110565000614456077441784798172965072476758777005104899517561848907476919462080902589077211363210847187923094965784400804190672535025253148658844290267016723881975000329098812907829387","c2":"21417696224164507270366056510836827104713080576936582064746970651236499562948735625873876449375314791893351925799039582582740334017480586243115712835982157443582822463468662387597969987413958047799639468524581462779126372746256997265955396325113181358610895694212355035839603493758109882664914513305431512464834481293677759919743485826439497890642505817463428380783464936878380631080480922715664227779124598324128424344346361529573998732718860030946994987834473825729107843147760344324057210641795515338437481653939651788807658600539833727982048889496957817690207179471784041819455815574430812972888574568238219066913","claim2":"6742955173654762239835660047292438601709403149083252679603613012466311456595968266779324952505177540909838119278623156449545576826042399936951114788905051502925276586592955106562671309743927371027573070405746163182946414415340729721664342412619112115098129459338838737941826127735353304981177896823027745424061476180980684241487037451014271223204487368668885610066814554165696649298220428675714942603404754565559571427873542489670695027458424403563511161293178569397820638680230358549811351648516527375891373743196961511122371276984891536328364411323697191439526992370950691377489634028878111605215557946961007652070","a2":"24886952377505956111443193431094630886824620397080355926718046119798415708476053056773411337622670735451745259322359531044316749278282182116796738363080536621162815983134075132631219601029438111091636167675076188931524736211934063308659752407636282729803996430534714121818917301449536000262070872727995489255506735307388666363306175854003355706980016724495632504753401680500012901334160678350484857492479087937036806762530957684653786629720158740820557518480100502961715193889889243879267317602300065090363690612352554630742810452440821327187023221077566883002353627192853913368815951247082935252518504414839742045284","d2":"31192005178211776322199448754440789095739061793294870296762260442849088266362653531535200998463392238727659150950214574310128750742013425707609183390098037721439324514133715077570911041753764519819221497756602669303622777298968544471632306304776003593308262838897203493609554179641302454667258071703861880355968144538424015036355386221408828211145704690548497044555117308335628998666415320155734697631930160595059155799493901909075979612114783634870188219999745558052917780251618319761489271294382505850440230520771186496091198555483827599926589092924898912424043362680152467271564899381012885941331096113747613600682"},"rctxt":"23157354117224487834099321711635037466408044296970370716557239183695914853670735788442172981310633558383436969738244953920948211496928636857516160065623055409809254508596550476292612513939585147678231012590982348118991730113639468782123727294689390839415158389155734144081417102392098085511647072996330160745099323821637451771833868888482285882612585176935287091825646077972061870630200329951923142631612081931491112569131264564196680496531944346658274003361885407880278579251326251022783641947122570025784364191078584940290474524886414958713998642044583662725872495449715743763007016823662266406866475909695333646717","z":"79806180158588029558463431692899509017524077573843332496153623521203977339027952052122261809435460870617003232174097698743041112385293073328759643498794876186594895258636099099174846962565147568805516786229967742116454924294471250217858394664855673295814550866991607569515920142206971970510507301087798892607886224368312147587143245696932672113523916000665331210703996243457070632876998880422329978110788011488912984860953635133984092631084973430265876165445909663318200583113380183397091121918945997533147457419676579357849130156980450186197534788192265022332874250336958025337891102893569471606683470630540218161168"},"revocation":null}}"#,
        "2018-01-31 00:22:50"
    ],
    [
        "claim_definition_private::DunkM3x1y7S4ECgSL4Wkru:294",
        r#"{"secret_key":{"p":"172479824820782738164743955649395195880568729575531063169754394942288756713074126405283690685258142787982266295095213594740429389274700800425915339618261620803139098547044796312271869981403633430620321639359381923544704041310559287429894697442613117976964061339976725026777117196073446389279198079979524050969","q":"159108149071709741943795058986678347567865915772274739413100553081226221047442125485352277721801639775882696884732084662994125284500474734366102416959516500730520198814907493637936780577152355983871440443262017925929473807721385397876381649287310719416932919183355865808342195533800127342165076727220478630343"},"secret_key_revocation":null}"#,
        "2018-01-31 00:22:50",
    ],
    //Claim 3
    [
        "claim_definition::EmapZ8H9S2qPp3JKyfr5z1:302",
        r#"{"ref":302,"origin":"EmapZ8H9S2qPp3JKyfr5z1","signature_type":"CL","data":{"primary":{"n":"84700830175565774808170602143294776055622352147442249407169699592482287306050578401140603499423101812312969317540262401596210610760803850926632813609952582538713806364325785591927395836567923451204269953256042844341733018614059762951777301790540241601866055188102659691678727057969652305118751814818928786735342770604778549844790726141422775840375636751860484448466917866304454127712058897816742555549028644308829619277145318234547760318523655470243087920249831039755105408376081472318124024969512774499962765491002148288402592739544593541544404474516928435993059468861306031528759687517808085430150245072339389244817","s":"63619722357971205939223189111188814911054502936749429663965962400212171785865906031769860558482399583545590431314601229589392242347803490435765179710628599254533233479195143814098554993017791278542465739128018314790679280699757335201885495983849992806202186480821836193666001141690028624466595449088958463135769423211797193835391157867900995615379651058581984226885966295222582669374602938714584553514802884213575776731311167585902927234826101223297044388622403897442947099291328084211954203866394654773468107429788560974480037124303639617400226779136038583044126165732036564722836690308817599235739386432405213833076","rms":"83083867463820508818591882391326863201324687327537845138921840873353400948223718385401280632644094316957901105103015748814041529160225725425902121155929030358746854060889495657388426208339529262964120223557451725989993979719816488584076358098566508712346803739960357343662930830838696938482177332531880955800422514652630672579277835937860513164868096724026568056850096082848206354791301922200687471301042032324895385034752365120339659480602122277736877409095861837850071936799862435457646933261353377914835507343950326964897012067806987383380772627911232385541486403243972428682213098364350798290088219677248459544334","r":{"d3":"82903060253898497539079597516042417016004149657296782748711433090118677288119598990700481190941469378534085174629655507850588293009222920547885038569211697481872720604913361546923570226806050143188882233796824718589754938982952038453867871098784215480085367999066271697720727859275362277020833717478673545515886100398530374287677999369688459280691556155373463981502637771016102987296483233532528548741459877784366776400125111380126952963622847736522803977973142444672941816546701730995560073700629625644420661665300097094076534652078703917086037109827833148889324722595475386418408788698801426042168809132548322165995","c3":"10323564983971085785831676433324633408644958966407495047480787334469340161764152426642601328634880772827597331041723065611166356894635211603826584109670089511826951105275376897646774384626723123191700949656569101793129344002828750310720888537608165821452264715747548693535463764183883411268683151115026341052500819007981361868953662638392119092523866267608248472662834496953273166348541364649208815204489437837466186443566755601891052136837040087698049981853689709106193658702648399733177616670867587585073464057596028869335443470841690491948171138448168312284312809857501361314727926506384276281307789395855779252687","a3":"59956906521416047834837990530140763080144354648157831594014431746412388320307727109389253939600745620224741410915987073089369574246706717794580620818898728829572947746700733582240315599716158175258203570118518947463789330505902758310716393124564712581910812906884781860064317919114683141085800231879848991093251756535112958106326868727586099316706857226790006044696941882821186026682431272245021308538365840274399504057787712437841911785898706415423437836139559167925962983841388574045046257747676222684018416431986074414610406673308651849880182170326404405651130148077494008520410309413990648982689857632890650301058","b3":"55110543832526419844879606316329482893255204583439438543794270742913602176173133485738763013623495448007396475635492744655662132394417310994510696209458905618144740059988921581597804384393166703229612263907472939531958844018566874342326311580570853306858808647368374060943161491638590308194045780571102087115909540110320050887264277884946157419241570862538902378645956801523009734456003106848484993840743933151466109154990414802146929228118282259458489542743354692704303823954020242106270148602030225845306778398036063122253465210320861195552356115496367798750178817516755699608935939746191550081527120436696827734180","claim3":"16171517638783990170691018030285896435249657038336673209407968193624069207359904683674615586665617221806976681452429392948821407303368087156225079347857098734642951809427973187858266053154590459108963810945771369284851780930068152531609445926224749067883720031510764995939912862186892764001979918637379213236603801391103267526960343104801350518472798836272363736282135638464693292162482842972071604648229225483893573218946029022110486625468197443260916798105235280247750886795232080570800478512953058760788117825724404891431229830365956587094867275527733122895286956345476264227370737084810561167137424815173639969885"},"rctxt":"33965567995063684130231248001644031484914215546876355737009958878371343636793589556503468929107638904810509088515622728034343395158576126584411833580367551948056494091316327708888290934392758745919626171347762681117695903754144797447975281790852039634648876182610852736253167451406688474117892498747511719274781949377439833030529254156448495833098096520325583053696336900191915304489120065884888012700086728492468341658526737893063398201468803195379255574680426616382110724928233372499626755580469523205086420489282961008181088410541108956633335686064782080173128349926025584903471409849837722199028395334606409049232","z":"4565828794674474924921146728422679282996256750867765375252707722780934599229873626754691103959738700005741350441247483026295178941522226389170604037793177347503893051692009503530790349582980088235092578449154740814196436868038547333644500405433193588964001272289576872247524307079976116331185898578519476308479795086704854316448099354383135747024960767336056805826724207383901464450661727070001090689185688356330037357435394937467411726912890967938172921841304799631147440743670343556779927555055943803056340043216545082440890691080758571281034774815333481657870118683660449093833725277942590872234976634397900496753"},"revocation":null}}"#,
        "2018-01-31 00:27:24"
    ],
    [
        "claim_definition_private::EmapZ8H9S2qPp3JKyfr5z1:302",
        r#"{"secret_key":{"p":"156820526117289275311810487415122855467919868974703846730841961814859110589550988134853416283672716118999690495432462300497336881841615969969363352935887068906166424596114892348405950097337937893819175639674528121529321312268823257565085751722681841144559146855303808849186822561699224863704123742744659958581","q":"135028290416868474044370074329993567108177141597430100495558927757109664830611565358488324716856772963848879292121936491238706180952907169038769550324969542633571640022348503199187628909968455979184590723683378249371105698280670524738514918471144747797768793779446420710952251196781529771633767486241432804729"},"secret_key_revocation":null}"#,
        "2018-01-31 00:27:24",
    ],
    // Claim 4
    [
        "claim_definition::2hoqvcwupRTUNkXn6ArYzs:300",
        r#"{"ref":300,"origin":"2hoqvcwupRTUNkXn6ArYzs","signature_type":"CL","data":{"primary":{"n":"105120145380283329651855833151575436183860885897093613455035417807725263897576550454782072319123657510098495631736048904352812203033650818869037676336859278576235796798700427370447671032203891370566186928037989788430041073754872988031231508224150370962651367516794528170285245096771042064174298757814161328243729512041833714700287918439779388266043172372912892181950639428258390582856963067692110316626398925748777133588128770018515037702178452403482377212614600285732901633504043168200823380217337811689453869902643310700543100334568988068807419200552301992033802555957877984645401190613973368447171041510944417886353","s":"64380062037253389107329027134302253736217801750042293194998381436438112445055080765968592035325305816195771352408012926232313365422427562706860058288102677214639279858154723826362380238384195976426412778651178410925941878886383182666220422386808621177125782625921343434437255394848504664003209553258567446396995544478356004734995851722975455342251567978569884312174338815549265541344436795654538925791843477708468144375246669949329168061384326990582787486876769149043227313000960578863481723043441916855743225062861947439405039909889936867594135445698148017850965179879970367810933181244647301753718618301220568385108","rms":"43281679057808320846680693422259433028042756287444096812396218074808345485287063178541332940375332339665005654665964754136779285976841171566814871852537379299137680469628285010867209533538926404859581492573776610130798735916690515482072080174527750303516016611978764358946612751392830683259065785744463691939755876230082061569714744245049312858769767463582308629582225158931171042710911142979370139022674190211079487804269624669810005330734736574180795076729457784320961988455210467213456463446137021096728566552185603142803099797660989677079764222143789657765296380711158820123269076332905961100353063962543348281452","r":{"state":"93353662054464268282917712991250658884744586260249598960317312072793367267488732231374228522922431847945053614826250837768529359312886219526104969180214993391109945582470305834558836451415553027754337810568089969026870359317461882200479487566589121770618891472683969421315766062253171052635846263963005325748556222723781032226825745388612182127044534974984412965345266632778797164793280236201839813696308498281308700269602551491720534990637332268974178801444134146828530488242078637305409623143793637959813843027637164873764791442388866815233393267682455249988687381379192417041014674590358292125532200824585440895466","address2":"18892206241079269190243704488630508485429403198287728439405450216644789251822844296461870839519950860880036776594980581211910794213524425508647308548688220307028911227690370675734884719358150844184485297859246032864175205363899311716450694448671473885880783488300561051119692722667914080647523894249716944716113766462740557025005066688370060877264549945098775608010768242605195450941169331359747025452361220285982575821706562308980072223576726353909246430527574767930256761862950113519662278850881209136923822001339381306336445667044547658925521502841195949560858468302680256606273644798455512971332182604684713823890","city":"43152507106449453936527966157854967656746170484395494290779978684606892928575249030088628320193715112571607830570602533258373478959139299918176548548231046365779470527326932167116069767122911425173422922290762496672512532806000032675797061342318152794354465242770491319446580017396507441707876099894704524808687163444677931522094012958166467951822403470675277033078209752428376700606770977183627376674584360721794373484413706795725854462157751681455740994811322105399431579678351062124713209141100276130225811432089858128715580703737877384506686708928927937231624815945980103542778289519861611393282827654828609096402","address1":"49621560759654529522648897184703075713567612702367121859001020178108386389703690415066862250969053375790639381856372336526833089856663631796322623200310129174612210499200229741929034737173200594753796018541580411467506418226953100287177828266970606536712369801300937233200500964182870924324383664246402322340305785715012507006809494728091531120989118848661353965136786650700355337168362618928929729153226428745637301612972244802472589461780337178915362728585004078043904212848494486893998919073564638966430814529219794441958952555823217921102841877810432906053852922744601110934519660085519201598581777535930700545769","zip":"45620312171529791291494242137681495064360406804383749057346220953807855800260135257640534863926884736421764697204209514275055953297496026395927167160555722694186184443442595136565038226249348704470474660198431501223197815039488845375171005942184000603637256985632138809045775850954312145091446136393408645309538674313357363882990002163875239442833952181770431975343561338341450051944918966485460985175912890657961445897104182109152571988498578554651522710106605565601990214027638643297801413451240500840710366238619422778569522470865934218315620457907020081947590323896915189970198844348528297924926144307675063541381"},"rctxt":"20282149734589728869595674052018110812125054056981937189688415511910830604088410543260064180146834145281548548141198144610405552858865237717948665402480943760831983335315457827826156424868469628517748396623689983265777647758962737129347882452154467000788520757386162508876514129836577934877541306165093326892848764976551822836647755893060683773892395791125365917066819975131499907212279738895499481573731804496500433466986591390179406739839618584239805700470644740990973615022840373318092673263004294188858428696082709225412813800251215917090073986339953840284419193493138177783961149422906574540565929331308653659664","z":"69196540682333809525425749818504947602557459122341649627385781129639889468316957318617933728676023750378445017919647966526396977149041736473008975484257243137400272890584337617316741244951284812187652051644012419926345287358020395187957526961667646193041255070116638076797434075401136326495109340433872055190939495448434988874500470603573962404137764857548326837839091412883492900655026071734476912100332975259360454307954764084443547057475521270507556746902995513277183975757368948331880659258376850667784022363114148804703709030843519091910786391460105019182223961119741147340461689596007004632955667930666282159576"},"revocation":null}}"#,
        "2018-01-31 00:26:08"
    ],
    [
        "claim_definition_private::2hoqvcwupRTUNkXn6ArYzs:300",
        r#"{"secret_key":{"p":"175138817209285553731388295526761936572559087381578177073865257648169029694422872280859381551174901009823776801122007234012034322985646592265984935488517512233048335713077776988925636099958299347879885133545488127963305541480560368499384324239834452069807097517855279768865493175507504852977435884671305964359","q":"150052608347051865642166985797307323685886466537270695917798320676591225218955637916417208141455296888120757103191098911333945234632340664858467389025656892732639889335030785609733740566421494530860824045231752764066203624982939695574453035597378080085478202823278702990736203476905036874533722851209442188143"},"secret_key_revocation":null}"#,
        "2018-01-31 00:26:08"
    ],
    // standard schema 22 claimdef
    [
        "claim_definition::2hoqvcwupRTUNkXn6ArYzs:22",
        r#"{"ref":22,"origin":"2hoqvcwupRTUNkXn6ArYzs","signature_type":"CL","data":{"primary":{"n":"95988816833977718321053908250488629570457514208068630867750478683940516331190512635343875556353861996520420942942764044177763002317208256863583692280833664390924596927347917276916509712265099683701719722190847264336011366791349646628075830228221107542544322913672429252134634395372199666668133488708754715906386228819303847415355653588070547345790507756751815270365039011442555013267500268911273838928496074646366967013006410177564457589181935498611626078606100640175127268290631713582389212871195358403592668156815115204909093182426970335081558255981914344710344119317989929074630230145638022976317221173764697186421","s":"62239136673167627400423120471558362740458209171638071978601918053566350183687450717956992748067512356899370528120135193319392151694058748777060748081293323091215103099387813131878931292003270092633409753870130426381678924026245559969559059962714007210659185095561238242139898811485236935881011836748903561459433779778161892475164468554655878585359186684311981090938613189604474762067065341487499103199801119116900325020066015355408081181975583856258510412824439820070724438199956292870224543214915058121622865521176513439841954457206050314635711702515741604006521885357490977012671983238692772732050068670317432119054","rms":"2666742394705868422197949070279883409319120284432003775492060510232976427038817653106315822802224834945991535639305682492345293889828389066920020784361847559346088721405588350403736328639678112687453643191645972753864555837116824170886546947152931560986163238196094020179916172762650563939600887215771633895234076357514206807140568263467898745036078268629871170965547759267217089200408183373560209245380839040472521799103156292656587016193867160956678985890522193369534824821432616210787583250746210963436574615123008203792318992499168295961682255891427304653899735468070666858394635493017671211372298428346694370136","r":{"address1":"79430106995260793105642076079163752606161347435237878678168203044689856051822547487766521563311680380753591909939480622687752539511101280052606606866629584321137355571906597893399076375179861217245568711517649222005785823632572289003993523491122898953296585841084813122075085098097356338488813716328441796484205489885849185984642169508079526567645828355730756526411908147442665312484850690225714502480915918839393044940407785782203869407374317891972832948898772951301643372985568565914280784081766369554450649995485801960050418761044734560643168899544753494595613916165018601714048428268251753045528994243087065144835","zip":"22615254879355764653958650478419607599831036235429432450152331935938535743623465642971741725376817628794671474016269970108464110269202618366187203073583413269450891057851388983903286090158743373372502765956052072615948851315985651162647206520535661255385577276988024064090606137548366392128706180770747410774135297692937003056030893838687872629072920391121220887197033968789644634843044406106556939756745198489147258162398860766157964749645169766410260222255289941570381220758288764725948145819227209530054486639704113062697253001037291479989539921868196758105947084202844813888484008565116517745895178211292455694733","state":"5389307291795023724767396590585051755492881239862831966011285708839846644667534729677314805974713243759733463689119279401855775452689115868477769023824603769488834865779417919635825920919975519104516947401633401985460129750314494342807379684704178680513110561610788646263003522590695544208887512032194707187894836570620414582795466298418842377750383651243769758829214009962185051608355599514279256896379204901072282321061082831337616871861533868887226814211876439835255986208696211885637396407217496465291231085562106868927260469043543489659790071945183660814540207128940863200709695858489503545193374804871313764617","city":"74293894871977367759060252704534345335218780070750078875399161307877509632220987359349558825164299759132753770718269112182715877390141990101932340866343914532776732207720227212332987373975484039824934448470702683132162518162474377092967237940469633226277271723192881037579252515172943950534199753098776099352368667398023761611922422044473986083577562168309539427651434633868951151558156078066862888877452828814049212303812161652181936924323630202737030127237808172796156569876764079540381483951067805130896942315889373571107898166154732259892131126166507045712723368578395992958246741207450949682368692070109832600250","address2":"62245102215581448501024795144133233272032362386257832116292842768642447199425235407152317927152360802393938767974847625947081778641332887450797640622194038530111791916923268259520523425958949520886626976593312640864134231960227939479094814565673466738383505704629110772101845490196382811902708763639214281775907141634474001554782825796701982840574757506850919691605980110873914124778342476385024907780564691749527899177013978495925954891042213505032471154249587217342488105382143964872162352317153795918703738602811294988020790400406830570899346692888402195222524206807060033262678435941237800852691616184732199699983"},"rctxt":"95650189971639859896612697168398518174555679984051423930197404587933150680782307635981876795701282260886569030531509518577472744227104768139773550071582998135328541386103474244900743088590008426912178650425903427917608878536633077924458612023417837982597475938736958656995406235396866427894427477541584899831302054536164023375230562375959591948316605322328045641788957437240691382565803311876039782656157169530004694059508455786187015509258876824806694556808250916064559543523070870263318805331754691870543174609221526847542058954563771715740763642121304736631910606989341821044450289456724644698365195414508996978377","z":"30931274405908239007890874385170967603061487779677432303190865674750965567572978740022706424175437722173963850488296625234382628771402047435950207188587229830735692967511122478369596260635807055949842658003257782625140032345552811734684259724489194465204904940357385656425260021068243335380180404373610916660761856588524604896207550324650177162424459728110262870433527487174136617579313419321121537041812997489371858831584038908195572117490767641756996884580893003145723858706935861376796546277590651278836498576606347036898057816575425746855202249031593540829669694382215623764119884221830708338999694320658810512371"},"revocation":null}}"#,
        "2018-01-19 20:56:49"
    ],
    [
        "claim_definition_private::2hoqvcwupRTUNkXn6ArYzs:22",
        r#"{"secret_key":{"p":"147994992483722226695796045011684235809309423781128508158803929784354160216609372391549068696035183653818336853597866730292371284529976761888221582212813626580505679228888172522950665475350345678188763591772773741254257464285253418496398049565928060194413224976216924914132317463912094242224097692749187043829","q":"162148757912426329580848488425481308197570783683521257574076212536320583242105942819686169604321953715281620067963105294861614807334103995842227210817175897159871997469149148693805426651335858938548729488829824519277006024203128120131839471735406633445070652347566232438111357984964864315788582900774238972559"},"secret_key_revocation":null}"#,
        "2018-01-19 20:56:49"
    ],
    //DID DunkM3x1y7S4ECgSL4Wkru
    [
        "my_did::DunkM3x1y7S4ECgSL4Wkru",
        r#"{"did":"DunkM3x1y7S4ECgSL4Wkru","verkey":"837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY"}"#,
        "2018-01-19 21:26:11"
    ],
    [
        "key::837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY",
        r#"{"verkey":"837gvxJ2pUuhCspWti7qiRAo2JKCKaHg4X1k9SuKemWY","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPP7Uk7LfAi6P2ZgcpNMagSN7K1TDc73gkBzdpqvUAmpPnnxRLqXeBZbv"}"#,
        "2018-01-19 21:26:11"
    ],
    //DID 2hoqvcwupRTUNkXn6ArYzs
    [
        "my_did::2hoqvcwupRTUNkXn6ArYzs",
        r#"{"did":"2hoqvcwupRTUNkXn6ArYzs","verkey":"vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf"}"#,
        "2018-02-28 04:09:37"
    ],
    [
        "key::vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf",
        r#"{"verkey":"vrWGArMA3toVoZrYGSAMjR2i9KjBS66bZWyWuYJJYPf","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPPWbEpqU41NEy3MmoeUuhq6T8F4JuRPgtj3hoT6BBjgnEF4bbhsR84NH"}"#,
        "2018-02-28 04:09:37"
    ],
    //DID AQ2EZRY9JQ4ssjmZPL5MiU"
    [
        "my_did::AQ2EZRY9JQ4ssjmZPL5MiU",
        r#"{"did":"AQ2EZRY9JQ4ssjmZPL5MiU","verkey":"684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX"}"#,
        "2018-02-28 04:09:37"
    ],
    [
        "key::684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX",
        r#"{"verkey":"684CRDu3k4TGBzNU99JTqM8cVS4ZtRwC7eZHEvZjzMRX","signkey":"3GNKQyCswPamSCTPHj9BzJFY3DcXbswXLcteWUNtfgnD4f1rqbLiGTtqpehdg4nxpNz3o3S5iawopUCYbgURTGZT"}"#,
        "2018-02-28 04:09:37"
    ],
    //DID EmapZ8H9S2qPp3JKyfr5z1
    [
        "my_did::EmapZ8H9S2qPp3JKyfr5z1",
        r#"{"did":"EmapZ8H9S2qPp3JKyfr5z1","verkey":"8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq"}"#,
        "2018-01-19 20:27:15"
    ],
    [
        "key::8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq",
        r#"{"verkey":"8WFnbdyQkZ7pZDX9FRCLbtH4bjy3AacWKPYkpxHCxaVq","signkey":"xt19s1sp2UZCGhy9rNyb1FtxdKiDGZZPP7Uk7LfAi6PvimpyRHkzenYNbW6eLf5DKWU9mWHFQMWVpMQc7Bq3EL3"}"#,
        "2018-01-19 20:27:15"
    ],
    [
        "my_did::QgUb4aHJ2cigGZCrEe7DHk",
        r#"{"did":"QgUb4aHJ2cigGZCrEe7DHk","verkey":"DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q"}"#,
        "2018-03-12 15:31:34"
    ],
    [
        "key::DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q",
        r#"{"verkey":"DubGpQctfhNRw4cmzqaHjne6qokwpxuWrhiTJgJEGs7q","signkey":"3vSwMtqns4Y8oy6oUZ2Uxmf8aUz4tayb8gSSEUnnbexNZrimVH5HdERSFi2aPdwQgC9ynBbYvBPCkUG2Xq2NapJF"}"#,
        "2018-03-12 15:31:34"
    ],
    [
        "my_did::GXTZy9GzdtD2c1J88Jrn8C",
        r#"{"did":"GXTZy9GzdtD2c1J88Jrn8C","verkey":"9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc"}"#,
        "2018-03-12 15:31:34"
    ],
    [
        "key::9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc",
        r#"{"verkey":"9TnFnc8LQ8LhRQjLVjdBR7Sk63yjEkJ3ifvue4bftJJc","signkey":"5QEbR1JPRorcTazTgdH71nQqzVDhHs8cqSzT2at6LeS7soCWBqhu1kFdiKyKaks1qyg5GAsQp3GFScNAAJUCiomJ"}"#,
        "2018-03-12 15:31:34"
    ],
];

pub fn setup_dev_env(wallet_name: &str) {
    settings::set_defaults();
    pool::open_sandbox_pool();
    set_institution_dev_config(wallet_name);

    setup_wallet(wallet_name);
    wallet::init_wallet(wallet_name).unwrap();
}

pub fn be_consumer() {
    set_consumer_dev_config()
}
pub fn be_institution() {
    /* use the existing wallet */
    set_institution_dev_config(&settings::get_config_value(settings::CONFIG_WALLET_NAME).unwrap());
}

pub fn cleanup_dev_env(wallet_name: &str) {
    settings::set_defaults();
    wallet::close_wallet().unwrap();
    wallet::delete_wallet(wallet_name).unwrap();
    pool::close().unwrap();
    pool::delete(::utils::constants::POOL).unwrap();
}

fn set_institution_dev_config(wallet_name: &str) {
    let institution_logo_url = format!("https://robohash.org/123");
    settings::set_config_value(settings::CONFIG_INSTITUTION_NAME,"Evernym");
    settings::set_config_value(settings::CONFIG_WALLET_NAME, wallet_name);
    settings::set_config_value(settings::CONFIG_AGENCY_ENDPOINT, AGENCY_ENDPOINT);
    settings::set_config_value(settings::CONFIG_AGENCY_DID, AGENCY_DID);
    settings::set_config_value(settings::CONFIG_AGENCY_VERKEY, AGENCY_VERKEY);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_DID, SDK_TO_REMOTE_DID);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_VERKEY, SDK_TO_REMOTE_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_DID, INSTITUTION_DID);
    settings::set_config_value(settings::CONFIG_INSTITUTION_VERKEY, INSTITUTION_VERKEY);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_DID, REMOTE_TO_SDK_DID);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_VERKEY, REMOTE_TO_SDK_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_LOGO_URL, &institution_logo_url);
    settings::set_config_value(settings::CONFIG_GENESIS_PATH, constants::GENESIS_PATH);
}

fn set_consumer_dev_config() {
    /* NOTE: WALLET_NAME stays the same */
    let institution_logo_url = format!("https://robohash.org/456");
    settings::set_config_value(settings::CONFIG_INSTITUTION_NAME,"Evernym");
    settings::set_config_value(settings::CONFIG_AGENCY_ENDPOINT, C_AGENCY_ENDPOINT);
    settings::set_config_value(settings::CONFIG_AGENCY_DID, C_AGENCY_DID);
    settings::set_config_value(settings::CONFIG_AGENCY_VERKEY, C_AGENCY_VERKEY);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_DID, C_SDK_TO_REMOTE_DID);
    settings::set_config_value(settings::CONFIG_SDK_TO_REMOTE_VERKEY, C_SDK_TO_REMOTE_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_DID, C_INSTITUTION_DID);
    settings::set_config_value(settings::CONFIG_INSTITUTION_VERKEY, C_INSTITUTION_VERKEY);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_DID, C_REMOTE_TO_SDK_DID);
    settings::set_config_value(settings::CONFIG_REMOTE_TO_SDK_VERKEY, C_REMOTE_TO_SDK_VERKEY);
    settings::set_config_value(settings::CONFIG_INSTITUTION_LOGO_URL, &institution_logo_url);
    settings::set_config_value(settings::CONFIG_GENESIS_PATH, constants::GENESIS_PATH);
}

fn setup_new_wallet_with_new_claim(wallet_name: &str) {
    settings::set_defaults();

    pool::open_sandbox_pool();

    wallet::init_wallet(wallet_name).unwrap();
    let wallet_handle = wallet::get_wallet_handle();

    let (issuer_did, _) = SignusUtils::create_and_store_my_did(wallet_handle, Some(constants::DEMO_ISSUER_PW_SEED)).unwrap();
    SignusUtils::create_and_store_my_did(wallet_handle, Some(constants::DEMO_AGENT_PW_SEED)).unwrap();

    for x in 0..12 {
        let seed = format!("000000000000000000000000Issuer{:02}", x);
        println!("generating did/vk from seed: {}", seed);
        SignusUtils::create_and_store_my_did(wallet_handle, Some(&seed)).unwrap();
    }

    let data = r#"{"name":"Home Address","version":"0.1","attr_names":["address1","address2","city","state","zip"]}"#.to_string();
    let schema_handle = create_new_schema("1".to_string(), "name".to_string(), issuer_did.to_string(), data).unwrap();

    let schema_seq_no = get_sequence_num(schema_handle).unwrap();

    create_new_claimdef("anything".to_string(), "anything".to_string(), schema_seq_no, issuer_did, false).unwrap();
}

fn setup_wallet(wallet_name: &str) {
    use std::path::Path;
    use self::rusqlite::Connection;
    use std::env::home_dir;

    let home = home_dir().unwrap();
    let wallet_dir = format!(".indy_client/wallet/{}/sqlite.db", wallet_name);
    let wallet_dir = Path::new(&wallet_dir);
    let wallet_db = home.join(wallet_dir);

    wallet::init_wallet(wallet_name).unwrap();
    let connection = Connection::open(wallet_db.as_path()).unwrap();

    for entry in DEV_ENTRIES {
        connection.execute("INSERT OR REPLACE INTO wallet VALUES (?,?,?)", &[&entry[0].to_string(), &entry[1].to_string(), &entry[2].to_string()]).unwrap();
    }
    connection.close().unwrap();
    wallet::close_wallet().unwrap();
}
